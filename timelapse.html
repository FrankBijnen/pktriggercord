<!DOCTYPE html>
<html lang="en">
<head>
  <title>pkTriggerCord</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<!--  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css">-->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://use.fontawesome.com/999c1ebb04.js"></script>
<style>
footer {
    background-color: #aaaaaa;
}
body { 
   padding-bottom: 80px;
}
code {
   padding: 0px;
}
div[class="roww"] {
    border: 1px dotted rgba(0, 0, 0, 0.5);
}

div[class^="coll-"] {
    background-color: rgba(255, 0, 0, 0.2);
}
iframe {
    border: 0;
}
</style>

</head>
  <body>
    <nav class="navbar navbar-default">
      <div class="container-fluid">
	<div class="navbar-header">
	  <a class="navbar-brand" href="#">pkTriggercord</a>
	</div>
	<div class="collapse navbar-collapse">
	  <ul class="nav navbar-nav">
	    <li><a href="#cameras">Cameras</a></li>
	    <li><a href="#download">Download</a></li>
	    <li><a href="#development">Development</a></li>
	    <li><a href="#documentation">Documentation</a></li>
	  </ul>
	</div>
      </div>
    </nav>

  <div class="container" id="description">
    <div class="jumbotron">
      <h2>Creating HD timelapse videos with pkTriggerCord</h2>
      <p>This page shows a simple way to create HD timelapse videos with <a href='index.html'>pkTriggerCord</a> using a Pentax DSLR camera.</p>
    </div>
  </div>

    <div class="container">
      <div class="row">
	<div class="col-xs-12">
	  <ul>
	    <li><b>Step 1</b><br />
	      <p>Take pictures:</p>
	      <p>
		<code>pktriggercord-cli --frames 150 --delay 8
		  --aperture=5.6 --shutter=1/4 --iso=800 -o timelapse</code></p>
	      <p>This command will take 150 pictures. The delay is 8
		seconds (it will take approx. 20 minutes). More information about
		the command line parameters can be
		found <a href="pktriggercord_commandline.html">here</a>. The process will
		create 150 files: <code>timelapse-0000.dng</code>, <code>timelapse-0001.dng</code>,...</p>
	    </li>
	    <li><b>Step 2</b><br />
	      <p>Convert the raw dng images to png using yous favourite
		raw-converter (It is possible to skip this step if you create jpeg
		files in step 1).</p>
	      <p>I'll use <a href="http://ufraw.sourceforge.net/">ufraw</a> in this step:</p>
	      <p><code>ufraw-batch --temperature=5500 --exposure=0
		  --out-type=png timelapse*.dng</code></p>
	      <p>This process will create 150 files:
		<code>timelapse-0000.png</code>, <code>timelapse-0001.png</code>,...</p>
	    </li>
	    <li><b>Step 3</b><br />
	      <p>Change the aspect ratio and reduce the size of the images.</p>
	      <p>The aspect ratio of the still images is usually 3:2. The typical aspect
		ratio for videos is 16:9 (or maybe 4:3) so we change the aspect
		ratio by cropping the top and the bottom part of the images:</p>

	      <img src="timelapse-box.jpg" width="400" alt="timelapse box" />
	      <p>We also reduce the size of the images in this
		step. For a <a href="http://en.wikipedia.org/wiki/1080p">1080p</a>
		video 1920x1080 size will be enough.</p>
	      <p>For the resize/crop I'll use <a href="http://www.imagemagick.org/">imagemagick:</a></p>
	      <p>
		<code>for i in `seq -w 0 149`; do convert timelapse-0${i}.png -gravity
		  Center -crop 4272x2403+0+0 +repage -resize 1920x1080 -quality 90
		  timelapse-0${i}_small.jpg; done</code></p>
	      <p>Arguments in this step differ based on your camera model and your
		raw-converter. Since the size of my original image was 4272x2848, I
		cropped it to 4272x2403 and resized it to 1920x1080.</p>
	      <p>This process will create 150 files:
		<code>timelapse-0000_small.jpg</code>, <code>timelapse-0001_small.jpg</code>,...</p>
	    </li>
	    <li><b>Step 4</b><br />
	      <p>Create the video using <a href="http://www.ffmpeg.org/">ffmpeg</a>:</p>
	      <p><code>ffmpeg -r 25 -i timelapse-%04d_small.jpg -vcodec
		  libx264 -vpre normal -b 1800k -aspect 16:9
		  timelapse.mkv</code></p><br />
	      <iframe title="YouTube video player" width="640" height="390" src="http://www.youtube.com/embed/XvaEtq1g6Gg"></iframe>
	    </li>
	  </ul>
	</div>
      </div>
    </div>
    <footer class="footer navbar navbar-fixed-bottom text-left">
      <div class="container">
	<p><span class="fa fa-envelope"><a href="mailto:andras.salamon@melda.info">E-mail</a></span><br />
	  <a href="https://github.com/asalamon74/pktriggercord/">
	    <img height="16" src="GitHub-Mark-32px.png" alt="github" /> github project page</a><br />
	  <img height="16" src="lgplv3-88x31.png" alt="lgpl" /> License: <a href="https://www.gnu.org/licenses/lgpl-3.0.en.html">LGPL</a></p>
      </div>
    </footer>
  </body>
</html>
